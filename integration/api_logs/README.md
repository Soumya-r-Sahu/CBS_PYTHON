# Logs from third-party APIs

"""
This package handles API integration logs for the Core Banking System.

How to Implement:
- Use this folder to store logs generated by API integrations (e.g., logs from third-party payment gateways, partner APIs, etc.).
- Each log file should be named according to the integration or date for easy tracking.

Schema Example:
- Each log entry should include: timestamp, API endpoint, request/response data, status, and error (if any).

**Log Entry JSON Schema:**
```json
{
  "type": "object",
  "properties": {
    "timestamp": { "type": "string", "format": "date-time" },
    "endpoint": { "type": "string" },
    "request": { "type": "object" },
    "response": { "type": "object" },
    "status": { "type": "string", "enum": ["SUCCESS", "FAILURE", "PENDING"] },
    "error": { "type": ["string", "null"] }
  },
  "required": ["timestamp", "endpoint", "request", "response", "status"],
  "additionalProperties": false
}
```

**Steps to Use the Schema in Python:**
1. Define a Python dataclass or dictionary structure matching the schema.
2. Use the `jsonschema` library to validate log entries (optional).
3. Serialize log entries to JSON before writing to log files.

**Python Example:**
```python
from dataclasses import dataclass, field
from typing import Any, Optional
from datetime import datetime

@dataclass
class ApiLogEntry:
    timestamp: str
    endpoint: str
    request: dict
    response: dict
    status: str
    error: Optional[str] = None

# Example usage:
log_entry = ApiLogEntry(
    timestamp=datetime.utcnow().isoformat() + "Z",
    endpoint="/upi/transaction",
    request={"amount": 100, "to": "user123"},
    response={"result": "ok"},
    status="SUCCESS"
)
```

Sample Log Entry (JSON):
{
  "timestamp": "2025-05-12T10:00:00Z",
  "endpoint": "/upi/transaction",
  "request": { ... },
  "response": { ... },
  "status": "SUCCESS",
  "error": null
}
